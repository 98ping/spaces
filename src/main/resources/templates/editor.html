<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IntelliJ-like File Explorer</title>
    <link rel="stylesheet" type="text/css" media="all"
          href="../static/css/editor.css" th:href="@{/css/editor.css}"/>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"
          integrity="sha384-mQA6Pj4R2FpQ5axlRUOfshBxMFWzJo3FdXpm2z8v8hbqOeHzGsVz8aqw/6Tw3OgZ" crossorigin="anonymous">
</head>
<body class="dark-mode">
<div class="container">
    <aside class="sidebar">
        <h2>Navigation</h2>
        <ul>
            <li><i class="fas fa-home"></i> Home</li>
            <li><i class="fas fa-file-alt"></i> Documents</li>
            <li><i class="fas fa-image"></i> Pictures</li>
            <li><i class="fas fa-music"></i> Music</li>
            <li><i class="fas fa-film"></i> Videos</li>
        </ul>
    </aside>
    <div class="content">
        <div class="file-explorer-container">
            <div class="file-explorer">
                <div class="current-path">
                    Current Path: <span>/</span>
                </div>
                <div class="table-container">
                    <table class="file-table">
                        <thead>
                        <tr>
                            <th>Name</th>
                            <th>Type</th>
                            <th>Size</th>
                            <th>Created</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr class="folder" th:each="file : ${files}">
                            <td>
                                <a href="#">
                                    <span class="folder-logo">üìÅ</span>
                                    <span class="folder-name" th:text="${file.getName()}"></span>
                                </a>
                            </td>
                            <td th:text="${file.isDirectory() ? 'Folder' : 'File'}"></td>
                            <td th:text="${file.readableFileSize()}"></td>
                            <td>Jan 1, 2024</td>
                        </tr>
                        <!-- Add more files and folders as needed -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
        <div class="project-description">
            <h2>Environment Details</h2>
            <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla hendrerit, libero ut convallis vestibulum,
                turpis nisi accumsan nunc, vel tristique quam justo id ipsum. Vestibulum ante ipsum primis in faucibus
                orci luctus et ultrices posuere cubilia curae; Cras in semper orci. Morbi nec nunc et urna fermentum
                finibus.</p>
            <h2>Environment Settings</h2>
            <label class="setting-item">
                <div class="setting-label">Environment Destination</div>
                <div class="setting-description">Set where you want this environment to be at.</div>
                <input type="text" placeholder="Enter your destination..." class="setting-textbox", id="environment-textbox">
            </label>
            <label class="setting-item">
                <div class="setting-label">Environment Description</div>
                <div class="setting-description">Set what you want the description of this environment to be.</div>
                <input type="text" placeholder="Enter your description..." class="setting-textbox", id="description-textbox">
            </label>
            <label class="setting-item">
                <div class="setting-label">Auto-Clean Environment</div>
                <div class="setting-description">Automaticially attempt to clean the environment whenever it is loaded
                    into memory.
                </div>
                <input type="checkbox" class="auto-clean-checkbox", id="auto-clean">
            </label>
            <button class="apply-button">Apply</button>
        </div>
    </div>
</div>
</body>
<script th:inline="javascript">
    document.addEventListener("DOMContentLoaded", function() {
        // Function to handle the click event of the "Apply" button
        document.querySelector('.apply-button').addEventListener('click', function() {
            // Gather the updated settings data
            const updatedSettings = {
                autoClean: document.getElementById('auto-clean').checked,
                environment: document.getElementById('environment-textbox').value,
                description: document.getElementById('description-textbox').value
            };

            // Send the updated settings data to your endpoint
            sendDataToEndpoint(updatedSettings);
        });

        // Function to send data to the endpoint
        function sendDataToEndpoint(data) {
            const endpointUrl = 'http://localhost:8080/environment/update/' + [[${environment.getStringedIdentifier()}]];

            // Send a POST request with the settings data as JSON
            fetch(endpointUrl, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(data)
            })
            .then(response => {
                if (!response.ok) {
                    throw new Error('Network response was not ok');
                }
                return response.json();
            })
            .then(data => {
                console.log('Settings applied successfully:', data);
                // You can handle the response from the server here if needed
            })
            .catch(error => {
                console.error('Error applying settings:', error);
                // Handle errors here
            });
        }
    });
</script>
</html>